schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/cvClassifier/pipeline/S01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 7c394f26f6e6210446b1b015f1eee2d5
      size: 1183
    - path: src/cvClassifier/pipeline/S01_data_ingestion.py
      hash: md5
      md5: b96c9316e45ef5798ba5875c61a540e2
      size: 853
    outs:
    - path: artifacts/data_ingestion/Data
      hash: md5
      md5: aa93df70650f0a7f1d594ec7f562a6f1.dir
      size: 124987534
      nfiles: 1004
  model_preparation:
    cmd: python src/cvClassifier/pipeline/S02_model_preparation.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 7c394f26f6e6210446b1b015f1eee2d5
      size: 1183
    - path: src/cvClassifier/pipeline/S02_model_preparation.py
      hash: md5
      md5: 8161a047721d32163f463d8fc3bc3ea5
      size: 1179
    params:
      params.yaml:
        CLASSES: 4
        IMAGE_SIZE:
        - 224
        - 224
        - 3
        INCLUDE_TOP: false
        LEARNING_RATE: 0.01
        WEIGHTS: imagenet
    outs:
    - path: artifacts/model_preparation
      hash: md5
      md5: 2dc9f90ac361eac3d0d9b168992a179b.dir
      size: 153692068
      nfiles: 2
  model_training:
    cmd: python src/cvClassifier/pipeline/S03_model_training.py
    deps:
    - path: artifacts/data_ingestion/Data
      hash: md5
      md5: aa93df70650f0a7f1d594ec7f562a6f1.dir
      size: 124987534
      nfiles: 1004
    - path: artifacts/model_preparation
      hash: md5
      md5: 2dc9f90ac361eac3d0d9b168992a179b.dir
      size: 153692068
      nfiles: 2
    - path: config/config.yaml
      hash: md5
      md5: 7c394f26f6e6210446b1b015f1eee2d5
      size: 1183
    - path: src/cvClassifier/components/model_training.py
      hash: md5
      md5: 2537a213a346f1260237a1d306182721
      size: 20160
    - path: src/cvClassifier/pipeline/S03_model_training.py
      hash: md5
      md5: 262a3161549039fd9663eef326bcd15a
      size: 1091
    params:
      params.yaml:
        AUGMENTATION: true
        BATCH_SIZE: 16
        BATCH_SIZE_OPTIONS:
        - 16
        - 32
        - 64
        EPOCHS: 1
        EPOCHS_OPTIONS:
        - 25
        - 100
        - 200
        IMAGE_SIZE:
        - 224
        - 224
        - 3
        LEARNING_RATE: 0.01
        LEARNING_RATE_RANGE:
        - 0.001
        - 0.01
        N_TRIALS: 10
        TIMEOUT: 7200
    outs:
    - path: artifacts/model_training/trained_model_resnet50.pth
      hash: md5
      md5: 3555bb02c63a07dbf4a4817ab53df991
      size: 94411310
    - path: artifacts/model_training/trained_model_vgg16.pth
      hash: md5
      md5: e3888df0ec12bae4b24d315f1b0672d2
      size: 59278786
  model_evaluation:
    cmd: python src/cvClassifier/pipeline/S04_model_evaluation.py
    deps:
    - path: artifacts/data_ingestion/Data
      hash: md5
      md5: aa93df70650f0a7f1d594ec7f562a6f1.dir
      size: 124987534
      nfiles: 1004
    - path: artifacts/model_training/trained_model_resnet50.pth
      hash: md5
      md5: 3555bb02c63a07dbf4a4817ab53df991
      size: 94411310
    - path: artifacts/model_training/trained_model_resnet50.pth
      hash: md5
      md5: 3555bb02c63a07dbf4a4817ab53df991
      size: 94411310
    - path: config/config.yaml
      hash: md5
      md5: 7c394f26f6e6210446b1b015f1eee2d5
      size: 1183
    - path: src/cvClassifier/components/model_evaluation.py
      hash: md5
      md5: dda818fdb772fa738274a0606e2ac88e
      size: 8210
    - path: src/cvClassifier/pipeline/S04_model_evaluation.py
      hash: md5
      md5: 05031faade4aff2f168eb0c6e107f2ca
      size: 942
    params:
      params.yaml:
        BATCH_SIZE: 16
        IMAGE_SIZE:
        - 224
        - 224
        - 3
    outs:
    - path: artifacts/model_evaluation/final_scores.json
      hash: md5
      md5: cd9c0508f7031d3714c2bb38024857b4
      size: 122
    - path: model/model.pth
      hash: md5
      md5: 3555bb02c63a07dbf4a4817ab53df991
      size: 94411310
