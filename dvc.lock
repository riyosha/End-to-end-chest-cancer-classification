schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/cvClassifier/pipeline/S01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 86e17afc848960c02d3c9936e8e59099
      size: 1120
    - path: src/cvClassifier/pipeline/S01_data_ingestion.py
      hash: md5
      md5: b96c9316e45ef5798ba5875c61a540e2
      size: 853
    outs:
    - path: artifacts/data_ingestion/Data
      hash: md5
      md5: aa93df70650f0a7f1d594ec7f562a6f1.dir
      size: 124987534
      nfiles: 1004
  model_preparation:
    cmd: python src/cvClassifier/pipeline/S02_model_preparation.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 86e17afc848960c02d3c9936e8e59099
      size: 1120
    - path: src/cvClassifier/pipeline/S02_model_preparation.py
      hash: md5
      md5: 78381f7c750f46aaccea875c50136e28
      size: 863
    params:
      params.yaml:
        CLASSES: 4
        IMAGE_SIZE:
        - 224
        - 224
        - 3
        INCLUDE_TOP: false
        LEARNING_RATE: 0.01
        WEIGHTS: imagenet
    outs:
    - path: artifacts/model_preparation
      hash: md5
      md5: f54852c3feb6a9c7c0c43d09462766fb.dir
      size: 118154628
      nfiles: 2
  model_training:
    cmd: python src/cvClassifier/pipeline/S03_model_training.py
    deps:
    - path: artifacts/data_ingestion/Data
      hash: md5
      md5: aa93df70650f0a7f1d594ec7f562a6f1.dir
      size: 124987534
      nfiles: 1004
    - path: artifacts/model_preparation
      hash: md5
      md5: f54852c3feb6a9c7c0c43d09462766fb.dir
      size: 118154628
      nfiles: 2
    - path: config/config.yaml
      hash: md5
      md5: 86e17afc848960c02d3c9936e8e59099
      size: 1120
    - path: src/cvClassifier/pipeline/S03_model_training.py
      hash: md5
      md5: 5b73e10b0dd256cd93d64f8c72e931b6
      size: 837
    params:
      params.yaml:
        AUGMENTATION: true
        BATCH_SIZE: 16
        BATCH_SIZE_OPTIONS:
        - 16
        - 32
        - 64
        EPOCHS: 1
        EPOCHS_OPTIONS:
        - 25
        - 30
        - 50
        - 75
        - 100
        - 300
        - 500
        IMAGE_SIZE:
        - 224
        - 224
        - 3
        LEARNING_RATE: 0.01
        LEARNING_RATE_RANGE:
        - 0.001
        - 0.01
        N_TRIALS: 10
        TIMEOUT: 1800
    outs:
    - path: artifacts/model_training/model.pth
      hash: md5
      md5: fb87d4321c0e385c7f8b9aa5942a27c6
      size: 59276610
  model_evaluation:
    cmd: python src/cvClassifier/pipeline/S04_model_evaluation.py
    deps:
    - path: artifacts/data_ingestion/Data
      hash: md5
      md5: aa93df70650f0a7f1d594ec7f562a6f1.dir
      size: 124987534
      nfiles: 1004
    - path: artifacts/model_training/model.pth
      hash: md5
      md5: fb87d4321c0e385c7f8b9aa5942a27c6
      size: 59276610
    - path: config/config.yaml
      hash: md5
      md5: 86e17afc848960c02d3c9936e8e59099
      size: 1120
    - path: src/cvClassifier/pipeline/S04_model_evaluation.py
      hash: md5
      md5: c5bd67f8d964bcc128eafa05021a1233
      size: 808
    params:
      params.yaml:
        BATCH_SIZE: 16
        IMAGE_SIZE:
        - 224
        - 224
        - 3
    outs:
    - path: artifacts/model_evaluation/scores.json
      hash: md5
      md5: f644e935cf6fb8c100c1d6fb97adee05
      size: 70
